---
import Wovn from "@/components/Wovn.astro";

interface Props {
  level: number;
  link: string;
  id: string;
  title: string;
  attributes?: {
    class?: string;
    [key: string]: any;
  };
}

const { level, link, id, title, attributes = {} } = Astro.props;

// 安全なHTMLを作成するための関数
const safeHTML = (html: string) => html;
---

<div class="adjustAnchor" id={id}>
  <Fragment
    set:html={`<h${level} class="h${level}-contents ${attributes.class || ""}" pid="${id}">${safeHTML(title)}</h${level}>`}
  />
</div>
{
  level <= 5 && link !== "" && (
    <div class="heading-link">
      <button
        class="heading-button"
        tabindex="0"
        aria-owns={`heading-url-${id}`}
        aria-expanded="false"
      >
        <span>
          <Wovn>i18n__Permalink</Wovn>
        </span>
        <i class="fas fa-link" aria-hidden="true" />
      </button>
      <div id={`heading-url-${id}`} class="heading-url" aria-hidden="true">
        <input
          readonly="readonly"
          value={`${link}#${id}`}
          name="headingUrl"
          type="text"
          onclick="this.focus(); this.select()"
        />
      </div>
    </div>
  )
}
