---
title: "ルックアップを設定する"
weight: 200
aliases:
  - "/ja/id/040547"
layout: "@/layouts/PageLayout.astro"
---

import Disabled2 from "@/components/Disabled2.astro";
import Enabled from "@/components/Enabled.astro";
import Heading from "@/components/Heading.astro";
import Img from "@/components/Img.astro";
import Note from "@/components/Note.astro";


ルックアップを設定すると、他のアプリから必要なデータをコピーして取得できるようになります。  
たとえば、「注文管理アプリ」に「商品管理アプリ」を参照するルックアップを設定すると、「商品管理アプリ」から商品情報を取得して「注文管理アプリ」に必要なデータをコピーできるようになります。データの二重入力を省き、入力ミスも防げます。  

参考：[ルックアップとは](/k/ja/id/040549.html) 　

<Img src="/k/kintone/img-ja/set_lookup_01.png" alt="スクリーンショット：ルックアップ完成イメージ" />

<Heading id="lookup_set_lookup_10">ルックアップの基本</Heading>
ルックアップの設定には、マスターデータ（参照先）となるアプリと、そのアプリからデータを取得するアプリが必要です。

* マスターデータ（参照先）となるアプリを作成する  
アプリ間の関連付けのキーとなるフィールドが必要です。
<Note>
ルックアップのキーに指定できるのは、次のフィールドに入力されたデータです。  

* 文字列（1行）
* 数値
* 計算
* ルックアップ
* リンク
* レコード番号  

</Note>

* データを取得するアプリに、ルックアップフィールドを配置する  
ルックアップフィールドで、マスターデータ（参照先）アプリとの関連付けを設定します。  
ルックアップフィールドの各設定項目については、次のページを参照してください。  
[ルックアップフィールドの設定項目](/k/ja/id/040526.html#form_parts_field_lookup_40)

* アプリが正しく参照されているかを確認する  
レコード登録画面を開いて、ルックアップを使ってマスターデータからデータを取得できるかを確認します。  
ルックアップの利用方法は次のページを参照してください。  
[設定したルックアップを使ってみる](/k/ja/id/040548.html)

<Heading id="lookup_set_lookup_20">ルックアップの設定例</Heading>
具体的なアプリを用いて、ルックアップの設定例を説明します。ここでは、注文管理アプリと商品管理アプリを使用します。

<Heading level={3} id="lookup_set_lookup_2010">マスターアプリにデータを登録する</Heading>
商品管理アプリ（マスターアプリ）のデータを注文管理アプリに取り込むには、はじめに元データとなる商品管理アプリのデータ登録が必要です。  
今回の例では、商品コード、商品名、単価などのデータを登録しておきます。
<Img src="/k/kintone/img-ja/set_lookup_02.png" alt="スクリーンショット：商品管理アプリのレコード画面" />

<Heading level={3} id="lookup_set_lookup_2020">ルックアップフィールドを設定する</Heading>
次に、データを取得する注文管理アプリにルックアップフィールドを配置します。

1. 注文管理アプリを開きます。

1. 「レコードの一覧」画面で、画面右上にある歯車の形をした[アプリを設定]アイコンをクリックします。  
   <Img src="/k/kintone/img/settings_new_icon.png" alt="スクリーンショット：[アプリを設定]アイコンが枠線で強調されている" />

1. 「アプリの設定」画面で、[フォーム]タブをクリックします。

1. フォームの設定画面で、フォームにテーブルを配置します。
   <Img src="/k/kintone/img-ja/set_lookup_0201.png" alt="スクリーンショット：アプリ設定の[フォーム]タブでテーブルのフィールドを右側のエリアに配置している画面" />

1. テーブルに[ルックアップ]をドラッグアンドドロップします。  
   ここでは、商品コードを元に情報を取得するルックアップを設定します。
   <Img src="/k/kintone/img-ja/set_lookup_03.png" alt="スクリーンショット：アプリ設定の[フォーム]タブでルックアップフィールドを右側のエリアのテーブルに配置している画面" />

1. 商品管理アプリから情報を取得したいフィールドも、あわせてテーブルに追加します。  
  今回は、次のフィールドを追加しました。
    * 商品名：文字列（1行）フィールド
    * 単価：数値フィールド
    * 数量：数値フィールド
    * 小計：計算フィールド
    <Img src="/k/kintone/img-ja/set_lookup_04.png" alt="スクリーンショット：フィールドを配置したテーブル" />

1. ルックアップフィールドの右上にある歯車の形をした設定アイコンにカーソルを合わせて、[設定]をクリックします。  
   <Img src="/k/kintone/img-ja/set_lookup_05.png" alt="スクリーンショット：ルックアップフィールドの[設定]アイコンと、[設定]を赤枠で強調している" />

1. 次の項目を設定します。
    * 「フィールド名」を変更します。  
      今回は「商品コード」に変更します。
    * 「関連付けるアプリ」を選択します。  
      データを取得する元のアプリを選択します。ここでは「商品管理アプリ」を選択します。
    * 「コピー元のフィールド」を選択します。  
      関連付けのキーにするフィールドを選択します。ここでは「商品コード」フィールドを選択します。  
      「コピー元のフィールド」には、次のフィールドを指定できます。  
       * 文字列（1行）、数値、計算、ルックアップ、リンク、レコード番号
    <Img src="/k/kintone/img-ja/set_lookup_06.png" alt="スクリーンショット：「ルックアップの設定」画面で、「フィールド名」「関連付けるアプリ」「コピー元のフィールド」を赤枠で強調している" />

1. 続けて、「ほかのフィールドのコピー」を選択します。  
  ルックアップ元のレコードから、ほかのフィールドのデータをまとめて取得できます。  
  ここでは、「商品名」 ← 「[商品管理]商品名」、「単価」 ← 「[商品管理]単価」を選択します。  
  [ + ]ボタンをクリックして、コピーしたいフィールド分だけ設定を追加できます。
   <Img src="/k/kintone/img-ja/set_lookup_10.png" alt="スクリーンショット：「ルックアップの設定」画面で、「ほかのフィールドのコピー」を赤枠で強調している" />

1. 必要に応じて、「コピー元のレコードの選択時に表示するフィールド」を選択します。  
  ここで選択したフィールドは、取得するレコードの選択画面に表示されます。たとえば、同じ商品コードのレコードが複数ある場合などに、レコードを識別するのに役立ちます。  
  ここでは「商品名」、「単価」を選択します。実際の表示画面は「[設定したルックアップを使ってみる](/k/ja/id/040548.html)」を参照してください。
   <Img src="/k/kintone/img-ja/set_lookup_08.png" alt="スクリーンショット：「ルックアップの設定」画面で、「コピー元のレコードの選択時に表示するフィールド」を赤枠で強調している" />

1. 次の項目も、必要に応じて設定します。

    * 絞り込みの初期設定を指定します。  
    ここで設定した絞り込み条件は、取得するレコードの選択画面に適用されます。ドロップダウンで条件を指定するフィールドを選択して、絞り込み条件を指定します。今回の例では絞り込みの初期設定は行わず、すべてのレコードが表示されるようにします。  
    なお、絞り込みの初期設定を指定していても、ルックアップフィールドに入力されたキーワードと一致するレコードが1つしかない場合は、絞り込みは適用されずにそのままレコード情報が取得されます。

    * ソートの初期設定を選択します。  
    取得するレコードの表示順を設定します。ここでは「商品コード」、「昇順」を選択します。  
    <Img src="/k/kintone/img-ja/set_lookup_0800.png" alt="スクリーンショット：「ルックアップの設定」画面で「絞り込みの初期設定」と「ソートの初期設定」を赤枠で強調している" />

1. [保存]をクリックします。

1. テーブル右上にある歯車の形をしたテーブル設定アイコンから[テーブルの設定]をクリックして、テーブル名を設定します。
   <Img src="/k/kintone/img-ja/set_lookup_0801.png" alt="スクリーンショット：テーブルの[設定]アイコンと[テーブルの設定]を赤枠で強調している" />

1. テーブル名を入力して、[保存]をクリックします。  
   ここでは、「商品情報」と入力します。
   <Img src="/k/kintone/img-ja/set_lookup_0802.png" alt="スクリーンショット：「テーブルの設定」画面で「テーブル名」を赤枠で強調している" />

1. 画面左上の[フォームを保存]をクリックします。

1. 画面右上の[アプリを更新]をクリックします。  
   <Img src="/k/kintone/img-ja/set_lookup_09.png" alt="スクリーンショット：アプリの設定画面で[アプリを更新]を赤枠で強調している" />

1. 「アプリを更新」ダイアログで、[アプリを更新]をクリックします。

<Heading id="lookup_set_lookup_25">そのほかのルックアップの設定例</Heading>
ルックアップ設定の「ほかのフィールドのコピー」を利用することで、複数選択フィールド、チェックボックスフィールド、ドロップダウンフィールドなどのデータを取得できます。  
ここでは、顧客リストアプリに登録している以下の内容を、案件管理アプリにもコピーする場合の設定例を紹介します。

* 利用製品（複数選択フィールド）
* オプション（チェックボックスフィールド）

<Img src="/k/kintone/img-ja/set_lookup_11.png" alt="スクリーンショット：複数選択フィールド・チェックボックスフィールドの使用イメージ" />

顧客リストアプリと案件管理アプリでは両方とも会社名を登録するので、この会社名を紐づけて、利用製品とオプションの内容を取得することにします。  
案件管理アプリで会社名としてルックアップフィールドを配置し、以下のとおり設定します。

<table cellpadding="1" cellspacing="1">
    <thead>
        <tr>
            <th scope="col"><b>関連付けるアプリ</b></th>
            <th scope="col"><b>コピー元のフィールド</b></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>顧客リスト</td>
            <td>会社名</td>
        </tr>
    </tbody>
</table>

<table cellpadding="1" cellspacing="1">
    <thead>
        <tr>
            <th scope="col"><b>ほかのフィールドのコピー（コピー先）</b></th>
            <th scope="col"><b>ほかのフィールドのコピー（コピー元）</b></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>利用製品</td>
            <td>[顧客リスト]利用製品</td>
        </tr>
        <tr>
            <td>オプション</td>
            <td>[顧客リスト]オプション</td>
        </tr>
    </tbody>
</table>

<Img src="/k/kintone/img-ja/set_lookup_12.png" alt="スクリーンショット：「ルックアップの設定」画面" />

案件管理アプリの会社名を入力して[取得]をクリックすると、顧客リストアプリから利用製品とオプションの内容を取得できるようになりました。
<Img src="/k/kintone/img-ja/set_lookup_13.png" alt="スクリーンショット：複数選択フィールド・チェックボックスフィールドの使用イメージ" />

<Heading id="lookup_set_lookup_30">ルックアップの注意点</Heading>
* 参照先のレコード（マスターデータ）に変更があっても、ルックアップで取得済みの値はそのまま維持されます。自動的に最新の値にはなりません。  
再度[取得]をクリックすると、最新の値に上書きされます。  

* 既存のレコードを更新する場合、CSVファイルを読み込んで一括更新する方法が便利です。  
ただし、「コピー元のフィールド」で選択したフィールドの値が、参照先のアプリ内で重複している場合、ファイルの読み込み時に対象レコードが特定できないため、値を更新できません。  
そのような値を更新したい場合は、レコードの編集画面で1件ずつ更新する必要があります。  
* テーブルに設定したフィールドは指定できません。
* ルックアップフィールドの設定を変更しても、登録済みのレコードの、次のフィールドの値は変わりません。
  * ルックアップフィールドの設定の「ほかのフィールドのコピー」で選択したフィールド

<Heading id="lookup_set_lookup_40">参考：動画で見るルックアップの設定</Heading>
動画でも、<Disabled2 regions={["US"]} />顧客管理アプリと案件管理アプリを例に&#123;&#123;< /disabled2 >&#125;&#125;ルックアップの設定方法を説明しています。

<Disabled2 regions={["US"]}>

<iframe width="700" height="393.75" src="https://www.youtube.com/embed/8tG1_aLJem8" frameborder="0" allowfullscreen></iframe>


</Disabled2>

<Enabled regions={["US"]}>

<iframe width="700" height="393.75" src="https://www.youtube.com/embed/wDj9zjN5Gp0?list=PLJOThIyQA7oO3I-EJ1_qFrZa_f_caz3S9" frameborder="0" allowfullscreen></iframe>


</Enabled>
