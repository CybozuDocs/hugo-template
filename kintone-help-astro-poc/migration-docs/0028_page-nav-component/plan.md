# PageNav コンポーネント統合実行プラン

## 概要

PageLayoutの`[PAGE NAV PARTIAL]`プレースホルダーを実際のPageNavコンポーネントで置き換え、同時にPageNavコンポーネントのPropsを最適化する。

## 作業目標

1. 既存のPageNavコンポーネントを確認・評価
2. Props設計の最適化（page全体ではなく必要なPropsのみ受け取るよう修正）
3. PageLayout.astroでの統合実装
4. 動作確認とテスト

## 詳細実行計画

### 第1段階: 現状確認

1. **PageLayout.astroの調査**
   - `[PAGE NAV PARTIAL]`プレースホルダーの位置特定
   - 周辺のコンテキストとレンダリング条件の確認

2. **PageNav.astroの調査**
   - 既存実装の確認
   - 現在のProps設計の分析
   - Hugo の pagenav.html との対応関係の確認

### 第2段階: Props最適化

1. **現在のProps分析**
   - PageNavで実際に使用されているプロパティの特定
   - 不要なプロパティの洗い出し

2. **Props型定義の修正**
   - BasePropsから必要最小限のカスタムPropsへ変更
   - 型安全性を保持した設計

3. **実装の調整**
   - 最適化されたPropsに合わせたコンポーネント内部の修正

### 第3段階: PageLayout統合

1. **import文の追加**
   - PageNav.astroのimport追加

2. **プレースホルダー置換**
   - `[PAGE NAV PARTIAL]`を実際のコンポーネント呼び出しに変更
   - 適切なPropsの受け渡し実装

3. **条件分岐の調整**
   - 必要に応じて表示条件の実装

### 第4段階: 品質確保

1. **ビルドテスト**
   - `npm run build`による構文エラーチェック
   - TypeScript型エラーの解消

2. **動作確認**
   - DOM構造の保持確認
   - 機能の動作確認

## 留意事項

### migrate-rules.mdに基づく制約

- **DOM構造の厳密な保持**: 元のHTML構造を正確に再現
- **破壊的変更の禁止**: 既存の構造を勝手に変更しない
- **Props最適化の原則**: 使用していないPropsは削除して簡素化

### 技術的考慮事項

- **BaseProps vs カスタムProps**: 実際の使用状況に応じた適切な選択
- **型安全性の確保**: TypeScript型定義の適切な実装
- **パフォーマンス**: Props最適化による性能向上効果

## 期待される成果

1. **PageLayout.astroの更新**: プレースホルダーから実コンポーネント呼び出しへ
2. **PageNav.astroの最適化**: Props設計の改善と不要な依存関係の除去
3. **品質向上**: ビルド時間短縮と保守性向上
4. **ドキュメント整備**: 変更記録と作業履歴の完備

## 作業完了基準

- [ ] PageLayout.astroでPageNavコンポーネントが正常に統合されている
- [ ] PageNavのProps設計が最適化されている
- [ ] npm run buildが成功する
- [ ] DOM構造が元のHugo実装と同等である
- [ ] 変更記録ファイルが作成されている
- [ ] 移行ドキュメントが更新されている