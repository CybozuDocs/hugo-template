# Hugo → Astro の Migrate 作業

- Astro への移行作業です。
- kintone-help-astro-poc/ ディレクトリ配下が移行後の Astro によるプロジェクトです。
- CLAUDE.md に記載されている Hugo から Astro への移行作業におけるルール は遵守してください

まず、**必ず次のファイルの内容を確認してください。**

- kintone-help-astro-poc/migration-docs/rules.md : Astro 開発の永続的なルール（移行完了後も使用）
- kintone-help-astro-poc/migration-docs/migrate-rules.md : 新たな移行ルールや注意点

## Hugo から Astro への移行作業におけるルール

### 作業におけるポリシー

- 仕様の維持
  - 事前にドキュメントに記載のない破壊的な変更は基本的に避ける
  - 変更がある場合は、細かくドキュメントに残す
  - 破壊的な変更は勝手に実施しない。ユーザーに内容の提案を行い、許可を得る。
- ドキュメントの作成
  - 作業開始時および完了時にドキュメントの最新化を行う

## 作業の流れ

### 1. 事前準備

kintone-help-astro-poc/migration-docs/ 配下に、作業ごとにディレクトリを作成し、次のファイルを作成する。

- **plan.md** : 詳細な実行プラン（作業開始前に作成）
- **prompt.md** : ユーザーからの指示と、それに対する回答の履歴

1. migration-docs/{4 桁の連番}\_{作業名}/ ディレクトリの作成
2. plan.md の作成
3. prompt.md の作成

例：環境変数移行の場合

```
kintone-help-astro-poc/migration-docs/0001_env-variables/
├── plan.md    # 環境変数移行の実行プラン
└── prompt.md  # 作業履歴
```

- `prompt.md` はユーザーから指示があるたびに都度更新すること

### 2. プランニングの許可を得る

- コードの変更は勝手に実施してはいけません
- まず、`plan.md` に作業のプランニングを作成します
- `plan.md` をユーザーに提示し、許可を得ます
- 許可が得られるまで、ユーザーと相談しつつプランニングを繰り返します

### 3. マイグレーション作業の実施

- `plan.md` に記載されたプランに従って、マイグレーション作業を実施します
- 作業中に必要に応じて、`prompt.md` を更新します
- 作業完了後には、`prompt.md` を更新します
- 次の "作業中および、作業完了後のドキュメントの更新" に記載のドキュメント更新も必要に応じて実施します

### 4. 作業中および、作業完了後のドキュメントの更新

migration-docs/ 配下の 3 つのファイルを適切に使い分け、作業中に必要に応じて最新化してください。

- **rules.md**: Astro 開発の永続的なルール（移行完了後も使用）
  - マイグレーション関連の情報は一切含まない
  - コンポーネント設計原則、品質管理指針など
- **migrate-rules.md**: マイグレーション作業時のルール
  - Hugo からの変換規則、移行時の注意点
  - DOM 構造の保持、コンポーネント名の対応など
- **migrate-memo.md**: マイグレーションの進捗管理
  - 作業状況、未解決事項、TODO
  - 各作業の概要と学習事項

判断としては次のようなイメージです。

- **rules.md**: Astro 開発の新しい永続的ルールを追加
- **migrate-rules.md**: Hugo から Astro への移行作業における移行ルールや注意点を追加
- **migrate-memo.md**: 作業の概要、学習事項、判明した課題を記録

**なお、すべての作業完了後には必ず更新を行ってください**
