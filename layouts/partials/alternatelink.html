{{- $product := $.Site.Params.product }}

{{- $targetregion := $.Site.Params.TargetRegion }}

{{- $regions := slice "JP" "US" "CN" }}
{{- $deflang := "en" }}
{{- if eq $targetregion "US" }}
    {{- $regions = slice "JP" "US" }}
{{- else if eq $targetregion "CN" }}
    {{- $regions = slice "JP" "CN" }}
{{- end }}

{{- if eq $product "Garoon" }}
    {{- $regions = slice "jp" "cn" }}
{{- else if eq $product "store" }}
    {{- $regions = slice "us" }}
{{- else if eq $product "store-jp" }}
    {{- $regions = slice "jp" }}
{{- end }}

{{- $diabled := .Params.disabled }}

{{- range $.AllTranslations }}
    {{- if eq .Site.Language.Lang $deflang }}
    <link rel="alternate" href="https://{{.Site.Params.domain}}{{.RelPermalink}}" hreflang="x-default" />
    {{- end }}
{{- end }}

{{- range $regions }}
    {{- if in $diabled . }}
    {{- else }}
        {{- $curregion := ( . | lower ) }}
        {{- $domain := "jp.cybozu.help" }}
        {{- if eq $curregion "us" }}
            {{- $domain = "get.kintone.help" }}
        {{- else if eq $curregion "cn" }}
            {{- $domain = "help.cybozu.cn" }}
        {{- end -}}

        {{- range $.AllTranslations }}
            {{- $disp := "true" }}
            {{- $thislang := .Site.Language.Lang }}
            {{- if eq $thislang "zh" }}
                {{- $thislang = "zh-Hans" }}
            {{- else if eq $thislang "zh-tw" }}
                {{- $thislang = "zh-Hant" }}
            {{- end -}}

            {{- if eq $curregion "cn" }}
                {{- if and (eq $product "Garoon") (eq $.Site.Params.service_type_id "on-premise") }}
                    {{- $disp = "false" }}
                {{- end }}
                {{- if eq .Site.Language.Lang "zh-tw" }}
                    {{- $disp = "false" }}
                {{- end }}
            {{- end -}}

            {{- if eq $disp "true" }}
                {{- $lang := (printf "%s-%s" $thislang $curregion) }}
    <link rel="alternate" href="https://{{$domain}}{{.RelPermalink}}" hreflang="{{$lang}}" />
            {{- end }}
        {{- end }}
    {{- end }}
{{- end }}
