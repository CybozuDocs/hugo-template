{{- $_hugo_config := `{ "version": 1 }` -}}
{{- $id := "" }}
{{- if .Get "id" }}
    {{- $id = .Get "id" }}
{{- end }}
{{- if ne $id "" }}
  <div class="step-wrap" id="{{$id}}">
{{- else }}
  <div class="step-wrap">
{{- end }}
    <div class="step-label">
{{- $number := "" }}
{{- if .Get "number" }}
    {{- $number = .Get "number" }}
        {{- if ne $id "" }}
        <input type="checkbox" class="step-check" id="sbodyid_{{$id}}"></input>
        {{- end }}
        <label for="sbodyid_{{$id}}"><div class="step-num">Step<span>{{$number}}</span></div></label>
{{- end }}
        <div class="step-desc">
{{- $section := "" }}
{{- if .Get "section" }}
    {{- $section = .Get "section" }}
    {{- $section = (partial "applyparams" (dict "target" $section "params" .Site.Params)) }}
    {{- $bc := "" }}
    {{- if .Get "bgcolor" }}
        {{- $bc = printf "%s%s" "background-color:" (.Get "bgcolor") }}
    {{- end }}
        <span class="step-section" style="{{$bc}}">{{$section}}</span>
{{- end }}
{{- $title := "" }}
{{- $divs := findRE "<div class=\"step-title\">(.|\n)*?</div>" .Inner }}
{{- range first 1 $divs }}
    {{- $title = (strings.TrimPrefix "<div class=\"step-title\">" .) }}
{{- end }}
{{- $title = (strings.TrimSuffix "</div>" $title) }}

{{- $title }}
        </div>
    </div>
</div>
<div class="step-memo">{{ printf "%s" .Inner | markdownify }}</div>