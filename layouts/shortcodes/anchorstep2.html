{{- $_hugo_config := `{ "version": 1 }` -}}
{{- $id := "" }}
{{- if .Get "id" }}
    {{- $id = .Get "id" }}
{{- end }}
{{- if ne $id "" }}
  <div class="step-wrap" id="{{$id}}">
{{- else }}
  <div class="step-wrap">
{{- end }}
    <div class="step-label">
{{- $number := "" }}
{{- if .Get "number" }}
    {{- $number = .Get "number" }}
        {{- if ne $id "" }}
        <input type="checkbox" class="step-check" id="sbodyid_{{$id}}"></input>
        {{- end }}
        <label for="sbodyid_{{$id}}"><div class="step-num">Step<span>{{$number}}</span></div></label>
{{- end }}
        <div class="step-desc">
{{- $section := "" }}
{{- $div1 := findRE "<div class=\"hidden-step-section\">(.|\n)*?</div>" .Inner }}
{{- range first 1 $div1 }}
    {{- $section = (strings.TrimPrefix "<div class=\"hidden-step-section\">" .) }}
{{- end }}
{{- $section = (strings.TrimSuffix "</div>" $section) }}
{{- $bc := "" }}
{{- if .Get "bgcolor" }}
    {{- $bc = printf "%s%s" "background-color:" (.Get "bgcolor") }}
{{- end }}
{{- if ne $section "" }}
        <span class="step-section" style="{{$bc}}">{{$section}}</span>
{{- end }}
{{- $title := "" }}
{{- $div2 := findRE "<div class=\"hidden-step-title\">(.|\n)*?</div>" .Inner }}
{{- range first 1 $div2 }}
    {{- $title = (strings.TrimPrefix "<div class=\"hidden-step-title\">" .) }}
{{- end }}
{{- $title = (strings.TrimSuffix "</div>" $title) }}
            <span class="step-title-body">{{$title}}</span>
        </div>
    </div>
</div>
<div class="step-memo">{{ printf "%s" .Inner | markdownify }}</div>